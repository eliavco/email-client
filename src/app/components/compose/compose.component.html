<div class="col-md-10 offset-md-1 mt-5 mb-5">
	<div class="card mt-4">
		<h4 class="card-header">
			Compose An Email
		</h4>
		<div class="card-body">
			<div class="form-check">
				<input class="form-check-input" type="checkbox" [(ngModel)]="manualHeaders" id="manual-headers-check">
				<label class="form-check-label user-select-none" for="manual-headers-check">
					&nbsp;&nbsp;Set Manual Additional Headers
				</label>
			</div><hr>
			<form  [formGroup]="form">
				<div *ngIf="associatedEmails" class="form-group">
					<label for="select-from-address">From*</label>
					<select class="form-control" formControlName="from" id="select-from-address">
						<option *ngFor="let address of associatedEmails" value="{{address}}">{{address}}</option>
					</select>
				</div>
				<ng-container *ngFor="let field of fields">
					<div class="form-group" *ngIf="!(field.upon === 'manualHeaders' && !manualHeaders)">
						<label [for]="field.id">{{ field.title }}{{ field.required ? '*' : '' }}</label>
						<ng-container *ngIf="field.multi">
							<textarea class="form-control" [formControlName]="field.control" [id]="field.id"></textarea>
						</ng-container>
						<ng-container *ngIf="!field.multi">
							<input [type]="field.type" [formControlName]="field.control" class="form-control" [id]="field.id">
						</ng-container>
						<small *ngIf="field.comment" class="form-text text-muted" [innerHtml]="field.comment"></small>
					</div>
				</ng-container>
			</form><hr class="mt-3">
			<div id="editor"><div id="toolbar"></div></div>
			<button type="button" class="btn btn-primary mt-3" [disabled]="form.status !== 'VALID'" (click)="onSubmit()">Send <fa-icon [icon]="icons.faPaperPlane"></fa-icon></button>
			<div *ngIf="form.status !== 'VALID'" class="alert alert-warning mt-4">Some fields are still invalid or missing</div>
			<div *ngIf="error" class="alert alert-danger mt-4">{{ error }}</div>
		</div>
	</div>
</div>